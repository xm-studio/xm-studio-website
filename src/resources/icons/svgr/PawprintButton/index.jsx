import React from 'react';
import { tween, styler, easing,  spring } from "popmotion";

class PawprintButton extends React.Component{
  constructor(props){
    super(props);
    this.compassRef = React.createRef();
  }

  componentDidUpdate(prevProps){
    const{isActive} = this.props;
    if(isActive !== prevProps.isActive){
      if(isActive){
        this.animateNeedle();
      }
      else{
        this.stopNeedleAnimation();
      }
      
    }
  }


  animatePaws = () => {
    const leftPalm = styler(this.compassRef.current.querySelector("#paw-path"));

    const appear = tween({
      from: {pathLength :0},
      to:{pathLength :100},
      duration:1000,
      ease: easing.linear
    });

    this.needleRotation = appear.start(leftPalm.set);
    this.stopHover();
  };

  stopNeedleAnimation =()=>{
    this.needleRotation && this.needleRotation.stop();
  };
  
  hoverHandle = () =>{
    const paws = styler(this.compassRef.current.querySelector("#paws"));
    const scalePaws = spring({
      from:{scale:1},
      to:{scale:1.2},
      duration:200,
      ease: easing.linear
    });
    this.pawScaling = scalePaws.start(paws.set);
  }

  stopHover = () =>{
    const paws = styler(this.compassRef.current.querySelector("#paws"));
    const scalePaws = spring({
      from:{scale:1.2},
      to:{scale:1},
      duration:200,
      ease: easing.linear
    });
    this.pawScaling = scalePaws.start(paws.set);
  }

  render(){
    console.log("Helloooo");
    //const{play} = this.props;
    return(
      <div className="sidebar-button" onMouseOver={this.hoverHandle} onMouseOut={this.stopHover} onClick={this.animatePaws}>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" >
        
        <g id="compassFull" ref={this.compassRef} >
          <g id="paws">
              <path fill="black"  stroke="black" id ="paw-path" d="M185.51,216.24h0a13,13,0,0,1,7,2.11c16,10,26.8,22.37,33.16,37.87,1.08,2.63,1.23,4.83.45,6.54-1.17,2.55-4.33,4.06-6.78,4.88-3.79,1.27-7.81,1.46-13.08,1.58h-.32A21.62,21.62,0,0,1,203,269a23.41,23.41,0,0,0-3.24-.22c-6,0-12,2.31-18.33,7.09a31.69,31.69,0,0,1-10,5.09,13.73,13.73,0,0,1-3.94.62c-2.36,0-6.45-.79-7.32-6-3.48-21,1.67-39.3,15.29-54.37a13.78,13.78,0,0,1,10.12-4.92m0-5a18.66,18.66,0,0,0-13.83,6.57c-15.06,16.66-20.14,36.63-16.51,58.54,1.1,6.65,6,10.22,12.25,10.22a19,19,0,0,0,5.38-.83,36.85,36.85,0,0,0,11.6-5.89c4.78-3.61,9.83-6.09,15.32-6.08a18.41,18.41,0,0,1,2.55.17,26.14,26.14,0,0,0,3.64.29h.44c5.12-.12,9.92-.29,14.55-1.84,9-3,12.95-9.32,9.36-18.06-7.07-17.23-18.91-30-35.13-40.2a18,18,0,0,0-9.62-2.88Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M311.65,302.38h0c8.12,0,12.3,2.84,16,10.87,3.13,6.87,4.67,16.07,4.71,28.13-.2,1.92-.28,3.91-.35,5.83-.16,4.2-.32,8.53-1.85,12.42-2.42,6.18-5.2,7-7.6,7a15.21,15.21,0,0,1-4.59-.84c-4.81-1.54-9.45-4.4-14.61-9a26.46,26.46,0,0,0-18-7.05l-1.1,0q-.63,0-1.26,0a33.47,33.47,0,0,1-12.32-2.37c-5.24-2.06-6.74-5.29-5-10.8C269.81,323.18,296,303,310,302.41l1.64,0m0-5c-.61,0-1.22,0-1.86,0-16.21.71-44.11,22.22-48.94,37.73-2.48,8,.21,13.88,8,16.94A38.46,38.46,0,0,0,283,354.81l1.45,0,.91,0A21.33,21.33,0,0,1,300,360.55c4.84,4.3,10.17,8,16.4,10a20.07,20.07,0,0,0,6.12,1.08c5.68,0,9.6-3.39,12.26-10.18s1.86-13.85,2.54-19.81c0-13.06-1.76-23-5.16-30.47-4.46-9.79-10.33-13.81-20.5-13.8Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M356.33,253.48h0a8.11,8.11,0,0,1,5.9,2.2,9.91,9.91,0,0,1,2.49,7.21c0,11.37-11,24.49-22,26.48a15.53,15.53,0,0,1-2.86.28,7.29,7.29,0,0,1-5.36-1.84c-1.82-1.84-2.2-4.84-2.2-7,0-10.71,10.08-24,20.3-26.76a14.21,14.21,0,0,1,3.75-.54m0-5a19.4,19.4,0,0,0-5.07.71c-12.4,3.4-23.94,18.6-24,31.58,0,8.78,4.74,13.88,12.56,13.88a21.91,21.91,0,0,0,3.75-.35c13.44-2.43,26.08-17.61,26.13-31.39,0-8.83-5.51-14.43-13.39-14.43Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M187.61,152.91h0c3.06,0,6,2,8.24,5.74a25.9,25.9,0,0,1,3.58,15.29v.29l0,.3c.44,6.44-1.71,12.33-6.38,17.53-1.92,2.14-4.08,3.27-6.25,3.27-2.34,0-4.69-1.36-6.63-3.83-6.51-8.33-6.93-24.48-.86-33.23,2.39-3.46,5.34-5.36,8.29-5.36m0-5c-4.44,0-8.93,2.49-12.4,7.51-7.31,10.55-6.82,29.11,1,39.16,3,3.81,6.76,5.75,10.57,5.75,3.49,0,7-1.62,10-4.93,5.43-6,8.19-13.15,7.65-21.21a30.92,30.92,0,0,0-4.31-18.14c-3.3-5.42-7.87-8.14-12.51-8.14Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M140.48,165.25h0a13.21,13.21,0,0,1,4.57.89c9.56,3.56,17.63,15.43,17.62,25.91v.14c.14,5.53-.87,8.22-3.73,9.94a7.93,7.93,0,0,1-4.15,1.22c-2.11,0-4.44-.85-7.14-2.61-10.11-6.6-15.2-15.5-15.13-26.47,0-5.56,3.08-9,8-9m0-5c-7.39,0-12.91,5.34-13,14-.09,13.4,6.4,23.51,17.4,30.69a18.37,18.37,0,0,0,9.87,3.42,12.88,12.88,0,0,0,6.72-1.94c5.43-3.25,6.31-8.62,6.16-14.35,0-12.64-9.3-26.29-20.87-30.6a18.13,18.13,0,0,0-6.32-1.21Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M311.61,230.11v5c3.29,0,6.37,2.26,8.45,6.18a26.2,26.2,0,0,1,2.77,13.61v.45a24.43,24.43,0,0,1-6.44,18.13c-2.22,2.47-4.72,3.83-7.06,3.83-2.68,0-5.27-1.77-7.3-5-5.38-8.5-4.66-24.58,1.46-32.46,2.37-3.06,5.25-4.75,8.12-4.75v-5m0,0c-4.25,0-8.6,2.2-12.08,6.68-7.37,9.52-8.21,28-1.73,38.21,3.07,4.84,7.22,7.31,11.53,7.31,3.69,0,7.48-1.81,10.78-5.49a29.36,29.36,0,0,0,7.72-21.72A31.16,31.16,0,0,0,324.48,239c-3.1-5.84-7.91-8.84-12.87-8.84Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M366.13,298.53h0c5.6,0,6.44,4.63,6.45,7.38,0,9.43-8.2,20.44-17.24,23.1a13.21,13.21,0,0,1-3.75.6,5.94,5.94,0,0,1-4.42-1.6c-1.34-1.37-2-3.65-2-6.58.17-9.5,9.06-20.48,18.29-22.58a12,12,0,0,1,2.64-.32m0-5a16.77,16.77,0,0,0-3.75.44c-11.49,2.62-22,15.54-22.18,27.37-.16,8.29,4.38,13.27,11.39,13.27a18.29,18.29,0,0,0,5.16-.8c11.24-3.31,20.85-16.18,20.83-27.91,0-7.62-4.64-12.37-11.45-12.37Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M127.17,210v5c10.94,0,23.36,10.59,23.72,20.23a5.2,5.2,0,0,1-1.31,4c-1.39,1.44-4,2.24-7.27,2.24h-.17c-10.11-.08-20.89-8.85-23.07-18.76a5.85,5.85,0,0,1,4.38-7.25,13.49,13.49,0,0,1,3.72-.49v-5m0,0a18.7,18.7,0,0,0-5.08.68,10.86,10.86,0,0,0-7.9,13.13c2.67,12.12,15.54,22.59,27.91,22.69h.21c8.64,0,13.85-4.39,13.58-11.46-.48-12.7-15.6-25-28.72-25Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M270,266.29h0a8.67,8.67,0,0,1,4.75,1.67c6.55,4.45,10.14,11.84,10.12,20.84,0,.43,0,.86,0,1.3a9.51,9.51,0,0,1,0,1.32c-1,6-2.39,8.47-5.61,9.74a5.65,5.65,0,0,1-2.1.44c-2.26,0-4.63-1.93-7.07-4.07-6.3-5.55-9.27-18-6.24-26.06.73-1.94,2.49-5.18,6.11-5.18m0-5c-4.64,0-8.74,3-10.79,8.42-3.73,10-.34,24.56,7.62,31.57,3.07,2.71,6.32,5.32,10.37,5.32a10.66,10.66,0,0,0,3.93-.79c6.19-2.43,7.78-7.81,8.72-13.59a22.94,22.94,0,0,0,0-3.42c0-10.69-4.38-19.59-12.31-25a13.47,13.47,0,0,0-7.56-2.54Z"/>
              <path fill="black"  stroke="black" class="cls-1" d="M221.29,178.55v5a6.64,6.64,0,0,1,5.11,2.73c3.76,4.56,5.43,9.44,5,14.5l0,.3v.29c.2,6.32-1.35,11.22-4.87,15.43-1.69,2-3.62,3.09-5.58,3.09s-4-1.15-5.72-3.24c-6.19-7.62-5.73-23.3.91-30.52a7.21,7.21,0,0,1,5.18-2.58v-5m0,0a12.06,12.06,0,0,0-8.86,4.2c-8.32,9-8.87,27.51-1.1,37.06,2.75,3.38,6.17,5.08,9.59,5.08s6.69-1.62,9.42-4.88c4.46-5.34,6.25-11.6,6-18.79.59-6.71-1.73-12.8-6.11-18.12a11.6,11.6,0,0,0-9-4.55Z"/>              
          </g>
        </g>
      </svg>
      </div>
    );
  }
}

export default PawprintButton;